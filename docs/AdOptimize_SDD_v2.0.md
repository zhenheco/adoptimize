# AdOptimize - 軟體設計規格書 (SDD) v2.0

> **版本**：2.0
> **建立日期**：2026-01-23
> **專案代號**：AdOptimize（廣告船長）
> **定位**：中小企業的 AI 廣告顧問

---

## 1. 系統概述

### 1.1 專案目標

建立一套專為**台灣中小企業主**設計的 AI 廣告管理平台，透過自動化 + AI 顧問的模式，讓不懂廣告的老闆也能有效投放 Google/Meta 廣告，**取代傳統行銷人員的角色**。

### 1.2 核心價值主張

> **「不用懂廣告，不用請人，AI 幫你投廣告、顧成效、省預算」**

| 價值 | 說明 |
|-----|------|
| **取代人力** | 省下月薪 3-5 萬的行銷人員成本 |
| **簡單易用** | 透過 LINE 對話就能管理廣告 |
| **自動優化** | AI 自動調整，老闆只管收單 |
| **看得懂** | 白話報告，不用學專業術語 |

### 1.3 目標客群

| 客群 | 描述 | 月廣告預算 | 痛點 |
|-----|------|-----------|------|
| **主要客群** | 自己投廣告的中小企業老闆 | NT$20,000 - 100,000 | 不懂廣告、沒時間管、請不起人 |
| **次要客群** | 剛創業的電商賣家 | NT$5,000 - 30,000 | 想省錢自己來但不知道怎麼做 |

### 1.4 競爭定位

| 比較對象 | 費用 | 我們的優勢 |
|---------|------|-----------|
| 聘請行銷人員 | NT$35,000-50,000/月 | 省 80% 人事成本 |
| 外包代操/投手 | 廣告費 15-20% | 省 30-50% 代操費 |
| 自己摸索 | 免費但浪費預算 | AI 幫你避免踩坑 |
| 國際工具（Optmyzr） | US$249+/月 | 中文、LINE 整合、更便宜 |

### 1.5 商業模式

#### 定價結構

```
基礎方案 NT$1,490/月 + 廣告花費 10%（保底月費）
├── ✅ 白話週報/月報（每週 1 份）
├── ✅ 自動駕駛模式（AI 自動優化）
├── ✅ LINE 通知與對話
├── ✅ AI 對話顧問（30 則/月）
└── ✅ 預算建議（5 次/月）

AI 加值包 +NT$990/月
├── ✅ AI 對話顧問（無限）
├── ✅ AI 文案生成（20 組/月）
├── ✅ 預算建議（無限）
└── ✅ 競品監控週報

AI 素材包 +NT$1,990/月
└── ✅ AI 圖片生成（10 張/月）
```

#### 收入試算

| 客戶月廣告花費 | 基礎方案月費 | 對比代操費(15%) | 客戶省下 |
|--------------|-------------|----------------|---------|
| NT$20,000 | $1,490 + $2,000 = $3,490 | $3,000 | - |
| NT$50,000 | $1,490 + $5,000 = $6,490 | $7,500 | $1,010 |
| NT$100,000 | $1,490 + $10,000 = $11,490 | $15,000 | $3,510 |

---

## 2. 功能規格

### 2.1 功能總覽

| 功能模組 | 說明 | 階段 |
|---------|------|:----:|
| 帳戶連接 | OAuth 連接 Google Ads / Meta Ads | ✅ MVP |
| LINE 整合 | LINE 官方帳號對話與通知 | ✅ MVP |
| 白話報告 | 週報/月報，老闆看得懂 | ✅ MVP |
| 自動駕駛 | 設定目標後 AI 自動優化 | ✅ MVP |
| 簡化儀表板 | 只顯示老闆需要的核心數據 | ✅ MVP |
| AI 對話顧問 | 自然語言問答廣告問題 | Phase 2 |
| AI 文案生成 | 自動產生廣告標題與描述 | Phase 2 |
| 預算顧問 | 根據目標建議投放預算 | Phase 2 |
| AI 圖片生成 | 生成廣告素材圖片 | Phase 3 |
| 競品監控 | 追蹤競爭對手廣告動態 | Phase 3 |

### 2.2 核心功能：LINE 整合

#### 2.2.1 使用情境

```
=== 情境 1：每日摘要通知 ===
LINE Bot：
「📊 今日廣告摘要
  💰 花費：$1,850
  📦 訂單：5 筆
  💵 營收：$12,500
  📈 投報率：6.8 倍 ✨

  一切正常，繼續保持！」

=== 情境 2：異常警示 ===
LINE Bot：
「⚠️ 注意！廣告異常

  你的「春季促銷」廣告成本突然上升 35%

  我建議先暫停這組廣告，避免繼續浪費錢。

  [同意暫停] [先不要] [詳細說明]」

=== 情境 3：對話互動 ===
老闆：「這個月廣告怎麼樣？」

LINE Bot：
「這個月花了 $32,000，帶來 47 筆訂單 📦

  每筆訂單成本 $680，比上月貴了一點。
  主要是那組「新品測試」廣告在燒錢。

  要我幫你關掉它嗎？預計可省 $8,000」

老闆：「好，關掉」

LINE Bot：
「✅ 已關掉「新品測試」廣告
  預計這個月可以省 $8,000 💰」
```

#### 2.2.2 LINE 功能規格

| 功能 | 說明 | 觸發方式 |
|-----|------|---------|
| 每日摘要 | 每晚 9 點發送當日數據 | 系統排程 |
| 異常警示 | CPA 暴增、ROAS 暴跌等 | 事件觸發 |
| 週報推送 | 每週一上午發送週報 | 系統排程 |
| 對話問答 | 回答廣告相關問題 | 用戶發送訊息 |
| 快速操作 | 透過按鈕暫停/啟用廣告 | 用戶點擊按鈕 |

### 2.3 核心功能：白話報告

#### 2.3.1 報告範例

```
════════════════════════════════════
📋 1 月份廣告月報
════════════════════════════════════

💰 本月花費：$42,000
📦 帶來訂單：89 筆
💵 創造營收：$156,800
📈 投報率：3.7 倍（每花 1 元賺 3.7 元）

────────────────────────────────────
🏆 表現最好
────────────────────────────────────
「冬季出清」廣告組
• 花費 $15,000 → 營收 $78,000
• 投報率 5.2 倍 🔥

────────────────────────────────────
❌ 表現最差（已處理）
────────────────────────────────────
「新品測試 A」廣告
• 花了 $4,500 只有 2 筆訂單
• AI 已在 1/15 自動關閉
• 幫你省下約 $8,000 💪

────────────────────────────────────
🎯 下月建議
────────────────────────────────────
維持目前策略，可考慮：
1. 在「冬季出清」加碼 $5,000
2. 準備春季新素材替換舊廣告

════════════════════════════════════
```

#### 2.3.2 報告類型

| 類型 | 頻率 | 內容重點 |
|-----|------|---------|
| 每日摘要 | 每天 | 花費、訂單、異常 |
| 週報 | 每週一 | 本週表現、趨勢、建議 |
| 月報 | 每月 1 號 | 完整回顧、ROI、下月建議 |

### 2.4 核心功能：自動駕駛模式

#### 2.4.1 運作邏輯

```
用戶設定目標：
┌─────────────────────────────────┐
│ 每筆訂單成本不超過 $500        │
│ 每月預算上限 $50,000           │
│ 優先要訂單數量（而非曝光）      │
└─────────────────────────────────┘

AI 自動執行規則：
├── 🔴 暫停規則
│   • 單一廣告 CPA > $600 連續 3 天 → 自動暫停
│   • 素材疲勞度 > 80 → 自動暫停
│   • 點擊率 < 0.5% 連續 7 天 → 自動暫停
│
├── 🟢 加碼規則
│   • 廣告 ROAS > 4 → 自動增加 20% 預算
│   • 新廣告表現優於平均 → 分配更多預算
│
├── 🟡 調整規則
│   • 預算消耗過慢 → 調整出價策略
│   • 某時段表現好 → 集中投放
│
└── 📢 通知規則
    • 執行任何動作 → LINE 通知用戶
    • 預算即將用完 → 詢問是否加碼
    • 發現異常 → 立即通知
```

#### 2.4.2 自動駕駛設定介面

```
┌─────────────────────────────────────────┐
│  🚗 自動駕駛設定                         │
├─────────────────────────────────────────┤
│                                          │
│  目標類型：                              │
│  ◉ 最大化訂單數量                        │
│  ○ 最大化營收                            │
│  ○ 控制成本為主                          │
│                                          │
│  每筆訂單成本上限：                      │
│  ┌──────────────────────────┐           │
│  │ NT$ 500                  │           │
│  └──────────────────────────┘           │
│                                          │
│  每月預算上限：                          │
│  ┌──────────────────────────┐           │
│  │ NT$ 50,000               │           │
│  └──────────────────────────┘           │
│                                          │
│  自動執行權限：                          │
│  ☑ 自動暫停表現差的廣告                  │
│  ☑ 自動調整預算分配                      │
│  ☐ 自動調整出價（需確認）                │
│                                          │
│  ────────────────────────────────────── │
│                                          │
│           [儲存設定]                      │
│                                          │
└─────────────────────────────────────────┘
```

### 2.5 簡化儀表板

#### 2.5.1 設計原則

| 原則 | 說明 |
|-----|------|
| **只看重點** | 花多少、賺多少、划不划算 |
| **不用術語** | 用「訂單成本」而非「CPA」 |
| **紅綠燈** | 好=綠色、注意=黃色、問題=紅色 |
| **可操作** | 每個問題都有對應的處理按鈕 |

#### 2.5.2 首頁佈局

```
┌─────────────────────────────────────────────────────────────┐
│  👋 嗨，王老闆                                今天 1/23（四） │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  🚗 自動駕駛：運作中                     [設定]       │   │
│  │      目標：每筆訂單 < $500 ｜ 本月預算 $50,000        │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  ═══════════════════════════════════════════════════════    │
│  📊 本月到目前為止                                           │
│  ═══════════════════════════════════════════════════════    │
│                                                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐            │
│  │ 💰 已花費   │ │ 📦 訂單數   │ │ 📈 投報率   │            │
│  │   $32,450  │ │    67 筆   │ │   3.8 倍   │            │
│  │   ──────── │ │   ──────── │ │   ──────── │            │
│  │ 預算剩 35% │ │ 每筆 $484  │ │  🟢 良好    │            │
│  └─────────────┘ └─────────────┘ └─────────────┘            │
│                                                              │
│  ═══════════════════════════════════════════════════════    │
│  ⚡ AI 最近幫你做了這些事                                    │
│  ═══════════════════════════════════════════════════════    │
│                                                              │
│  • 1/22 暫停「測試廣告 A」- 成本過高           省下 $2,100   │
│  • 1/20 加碼「熱銷商品」預算 +20%             多賺 $8,500   │
│  • 1/18 暫停 3 個疲勞素材                     省下 $1,800   │
│                                                              │
│  ═══════════════════════════════════════════════════════    │
│  ⚠️ 需要你決定（1）                                          │
│  ═══════════════════════════════════════════════════════    │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  📢 預算即將用完                                      │   │
│  │                                                       │   │
│  │  本月預算剩 $17,550（35%），預計 5 天後用完。        │   │
│  │  以目前表現，建議加碼 $20,000 可多帶來約 40 筆訂單。  │   │
│  │                                                       │   │
│  │              [不用了] [加碼 $10,000] [加碼 $20,000]   │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 系統架構

### 3.1 整體架構

```
┌─────────────────────────────────────────────────────────────────┐
│                          用戶觸點                                │
├──────────────────────────┬──────────────────────────────────────┤
│      LINE 官方帳號        │           Web 簡化後台               │
│   • 對話問答              │        • 儀表板                      │
│   • 通知接收              │        • 設定頁面                    │
│   • 快速操作              │        • 報告查看                    │
└──────────────────────────┴──────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────┐
│                        API Gateway                               │
│                      (FastAPI + JWT)                             │
└─────────────────────────────────────────────────────────────────┘
                                    │
            ┌───────────────────────┼───────────────────────┐
            ▼                       ▼                       ▼
┌───────────────────┐   ┌───────────────────┐   ┌───────────────────┐
│   LINE Service    │   │   Core Service    │   │    AI Service     │
│  • Webhook 處理   │   │  • 帳戶管理       │   │  • 報告生成       │
│  • 訊息發送       │   │  • 數據同步       │   │  • 對話問答       │
│  • 對話流程       │   │  • 自動駕駛規則   │   │  • 文案生成       │
└───────────────────┘   └───────────────────┘   └───────────────────┘
            │                       │                       │
            └───────────────────────┼───────────────────────┘
                                    ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Task Queue (Celery)                         │
│                    • 定時同步  • 報告生成  • 通知發送             │
└─────────────────────────────────────────────────────────────────┘
            │                       │                       │
            ▼                       ▼                       ▼
┌───────────────────┐   ┌───────────────────┐   ┌───────────────────┐
│   PostgreSQL      │   │      Redis        │   │   外部 API        │
│   • 用戶資料      │   │   • 快取          │   │  • Google Ads     │
│   • 廣告數據      │   │   • 任務佇列      │   │  • Meta Ads       │
│   • 對話記錄      │   │   • Session       │   │  • OpenAI/Claude  │
└───────────────────┘   └───────────────────┘   └───────────────────┘
```

### 3.2 技術規格

| 層級 | 技術 | 說明 |
|------|------|------|
| **後端框架** | Python + FastAPI | 高效能非同步 API |
| **資料庫** | PostgreSQL (Supabase) | 主要資料儲存 |
| **快取/佇列** | Redis (Upstash) | 任務佇列、Session |
| **任務排程** | Celery | 背景任務、定時同步 |
| **前端框架** | Next.js + TypeScript | Web 後台介面 |
| **LINE SDK** | LINE Messaging API | LINE 整合 |
| **AI 服務** | OpenAI / Claude API | 報告生成、對話問答 |
| **部署** | Vercel + Fly.io | 前端 + 後端 |

### 3.3 專案結構

```
/adoptimize/
├── backend/                        # 後端應用
│   ├── app/
│   │   ├── main.py                # FastAPI 入口
│   │   ├── config.py              # 設定檔
│   │   ├── api/                   # API 路由
│   │   │   ├── auth.py            # 認證
│   │   │   ├── accounts.py        # 帳戶連接
│   │   │   ├── dashboard.py       # 儀表板
│   │   │   ├── autopilot.py       # 自動駕駛
│   │   │   ├── reports.py         # 報告
│   │   │   └── line_webhook.py    # LINE Webhook
│   │   ├── services/              # 業務邏輯
│   │   │   ├── sync_service.py    # 數據同步
│   │   │   ├── autopilot_engine.py    # 自動駕駛引擎
│   │   │   ├── report_generator.py    # 報告生成
│   │   │   ├── line_service.py        # LINE 服務
│   │   │   └── ai_service.py          # AI 服務
│   │   ├── integrations/          # 外部整合
│   │   │   ├── google_ads.py
│   │   │   ├── meta_ads.py
│   │   │   └── openai_client.py
│   │   └── models/                # 資料模型
│   ├── tasks/                     # Celery 任務
│   │   ├── sync_tasks.py
│   │   ├── report_tasks.py
│   │   └── notification_tasks.py
│   └── tests/
├── frontend/                      # 前端應用 (Next.js)
│   ├── src/
│   │   ├── app/
│   │   │   ├── dashboard/         # 儀表板
│   │   │   ├── settings/          # 設定
│   │   │   ├── reports/           # 報告
│   │   │   └── autopilot/         # 自動駕駛設定
│   │   ├── components/
│   │   └── lib/
│   └── package.json
└── docs/
    ├── AdOptimize_SDD_v1.0.md     # 舊版規格
    └── AdOptimize_SDD_v2.0.md     # 本文件
```

---

## 4. 資料庫設計

### 4.1 核心資料表

#### 4.1.1 `users` - 用戶資料表

| 欄位 | 類型 | 說明 |
|-----|------|------|
| `id` | SERIAL PK | 主鍵 |
| `email` | VARCHAR(255) | 登入信箱 |
| `password_hash` | VARCHAR(255) | 密碼雜湊 |
| `name` | VARCHAR(100) | 姓名 |
| `company_name` | VARCHAR(200) | 公司名稱 |
| `line_user_id` | VARCHAR(100) | LINE 用戶 ID |
| `subscription_tier` | VARCHAR(20) | 訂閱層級 |
| `monthly_ad_spend` | DECIMAL | 本月廣告花費（計費用） |
| `ai_chat_count` | INT | 本月 AI 對話次數 |
| `ai_copywriting_count` | INT | 本月文案生成次數 |
| `created_at` | TIMESTAMPTZ | 建立時間 |

#### 4.1.2 `ad_accounts` - 廣告帳戶表

| 欄位 | 類型 | 說明 |
|-----|------|------|
| `id` | SERIAL PK | 主鍵 |
| `user_id` | INT FK | 所屬用戶 |
| `platform` | VARCHAR(20) | 平台 |
| `account_name` | VARCHAR(200) | 帳戶名稱 |
| `external_account_id` | VARCHAR(100) | 平台帳戶 ID |
| `access_token_encrypted` | TEXT | 加密 Token |
| `autopilot_enabled` | BOOLEAN | 是否啟用自動駕駛 |
| `autopilot_settings` | JSONB | 自動駕駛設定 |
| `last_synced_at` | TIMESTAMPTZ | 最後同步時間 |

#### 4.1.3 `autopilot_logs` - 自動駕駛執行記錄

| 欄位 | 類型 | 說明 |
|-----|------|------|
| `id` | SERIAL PK | 主鍵 |
| `ad_account_id` | INT FK | 帳戶 |
| `action_type` | VARCHAR(50) | 動作類型（pause/adjust_budget/etc） |
| `target_entity` | JSONB | 操作對象 |
| `reason` | TEXT | 執行原因（白話） |
| `before_state` | JSONB | 執行前狀態 |
| `after_state` | JSONB | 執行後狀態 |
| `estimated_savings` | DECIMAL | 預估節省金額 |
| `notified_via` | VARCHAR(20) | 通知管道（line/email） |
| `executed_at` | TIMESTAMPTZ | 執行時間 |

#### 4.1.4 `reports` - 報告記錄

| 欄位 | 類型 | 說明 |
|-----|------|------|
| `id` | SERIAL PK | 主鍵 |
| `user_id` | INT FK | 用戶 |
| `report_type` | VARCHAR(20) | 類型（daily/weekly/monthly） |
| `period_start` | DATE | 報告期間開始 |
| `period_end` | DATE | 報告期間結束 |
| `content` | JSONB | 報告內容（結構化） |
| `content_text` | TEXT | 報告內容（白話文字版） |
| `sent_via` | VARCHAR(20) | 發送管道 |
| `created_at` | TIMESTAMPTZ | 建立時間 |

#### 4.1.5 `conversations` - AI 對話記錄

| 欄位 | 類型 | 說明 |
|-----|------|------|
| `id` | SERIAL PK | 主鍵 |
| `user_id` | INT FK | 用戶 |
| `channel` | VARCHAR(20) | 管道（line/web） |
| `role` | VARCHAR(20) | 角色（user/assistant） |
| `content` | TEXT | 訊息內容 |
| `action_taken` | JSONB | 是否有執行動作 |
| `created_at` | TIMESTAMPTZ | 時間 |

### 4.2 ERD 簡化版

```
┌─────────────┐       ┌─────────────────┐
│   users     │───┬──▶│   ad_accounts   │
└─────────────┘   │   └─────────────────┘
                  │           │
                  │           ▼
                  │   ┌─────────────────┐
                  │   │ autopilot_logs  │
                  │   └─────────────────┘
                  │
                  ├──▶┌─────────────────┐
                  │   │    reports      │
                  │   └─────────────────┘
                  │
                  └──▶┌─────────────────┐
                      │  conversations  │
                      └─────────────────┘
```

---

## 5. API 設計

### 5.1 API 總覽

| Method | Endpoint | 說明 |
|--------|----------|------|
| **認證** |||
| POST | `/api/auth/register` | 註冊 |
| POST | `/api/auth/login` | 登入 |
| **帳戶** |||
| GET | `/api/accounts` | 取得已連接帳戶 |
| POST | `/api/accounts/connect/google` | 連接 Google Ads |
| POST | `/api/accounts/connect/meta` | 連接 Meta Ads |
| **儀表板** |||
| GET | `/api/dashboard` | 首頁數據 |
| GET | `/api/dashboard/actions` | AI 執行記錄 |
| GET | `/api/dashboard/pending` | 待決定事項 |
| **自動駕駛** |||
| GET | `/api/autopilot/settings` | 取得設定 |
| PUT | `/api/autopilot/settings` | 更新設定 |
| POST | `/api/autopilot/approve/{action_id}` | 核准待定動作 |
| **報告** |||
| GET | `/api/reports` | 報告列表 |
| GET | `/api/reports/{id}` | 報告詳情 |
| **LINE** |||
| POST | `/api/line/webhook` | LINE Webhook |
| **AI** |||
| POST | `/api/ai/chat` | AI 對話 |
| POST | `/api/ai/copywriting` | 生成文案 |

### 5.2 關鍵 API 規格

#### 5.2.1 儀表板 `GET /api/dashboard`

**Response:**
```json
{
  "autopilot": {
    "enabled": true,
    "target_cpa": 500,
    "monthly_budget": 50000
  },
  "current_month": {
    "spend": 32450,
    "orders": 67,
    "revenue": 123310,
    "roas": 3.8,
    "avg_cpa": 484,
    "budget_remaining_percent": 35
  },
  "recent_actions": [
    {
      "id": 123,
      "date": "2026-01-22",
      "action": "暫停「測試廣告 A」",
      "reason": "成本過高",
      "savings": 2100
    }
  ],
  "pending_decisions": [
    {
      "id": 456,
      "type": "budget_increase",
      "title": "預算即將用完",
      "description": "本月預算剩 35%，預計 5 天後用完",
      "options": [
        {"label": "不用了", "value": "ignore"},
        {"label": "加碼 $10,000", "value": "add_10000"},
        {"label": "加碼 $20,000", "value": "add_20000"}
      ]
    }
  ]
}
```

#### 5.2.2 AI 對話 `POST /api/ai/chat`

**Request:**
```json
{
  "message": "這個月廣告怎麼樣？"
}
```

**Response:**
```json
{
  "reply": "這個月花了 $32,000，帶來 67 筆訂單 📦\n\n每筆訂單成本 $484，控制在目標 $500 以內，表現不錯！\n\n要看更詳細的報告嗎？",
  "suggested_actions": [
    {"label": "看詳細報告", "action": "view_report"},
    {"label": "調整目標", "action": "adjust_target"}
  ]
}
```

---

## 6. LINE 整合規格

### 6.1 LINE 官方帳號設定

| 項目 | 設定 |
|-----|------|
| 帳號類型 | LINE Official Account |
| Messaging API | 啟用 |
| Webhook URL | `https://api.adoptimize.com/api/line/webhook` |
| 回覆模式 | Webhook |

### 6.2 訊息類型

| 類型 | 用途 | 格式 |
|-----|------|------|
| 文字訊息 | 日常摘要、對話回覆 | 純文字 + Emoji |
| Flex Message | 週報/月報 | 卡片式排版 |
| Quick Reply | 快速選擇 | 按鈕選項 |
| Confirm Template | 需要確認的操作 | 是/否按鈕 |

### 6.3 對話流程

```
用戶訊息
    │
    ▼
┌─────────────────┐
│ 意圖辨識        │
│ (AI 分類)       │
└─────────────────┘
    │
    ├─── 查詢類 ──▶ 查數據 → 生成白話回覆
    │
    ├─── 操作類 ──▶ 確認意圖 → 執行 → 回報結果
    │
    └─── 閒聊類 ──▶ AI 對話回覆
```

---

## 7. 自動駕駛引擎

### 7.1 規則定義

```python
# 自動駕駛規則設定
AUTOPILOT_RULES = {
    "pause_rules": [
        {
            "name": "high_cpa",
            "condition": "cpa > target_cpa * 1.2 AND days >= 3",
            "action": "pause_ad",
            "notification": "🔴 已暫停「{ad_name}」- 成本超標 20%"
        },
        {
            "name": "creative_fatigue",
            "condition": "fatigue_score > 80",
            "action": "pause_creative",
            "notification": "🔴 已暫停疲勞素材「{creative_name}」"
        },
        {
            "name": "low_ctr",
            "condition": "ctr < 0.5 AND impressions > 1000 AND days >= 7",
            "action": "pause_ad",
            "notification": "🔴 已暫停「{ad_name}」- 點擊率過低"
        }
    ],
    "boost_rules": [
        {
            "name": "high_roas",
            "condition": "roas > 4 AND spend > 1000",
            "action": "increase_budget_20",
            "notification": "🟢 已加碼「{ad_name}」預算 +20% - 表現優異"
        }
    ],
    "alert_rules": [
        {
            "name": "budget_running_out",
            "condition": "budget_remaining_percent < 40 AND days_remaining > 5",
            "action": "ask_user",
            "notification": "⚠️ 預算即將用完，要加碼嗎？"
        }
    ]
}
```

### 7.2 執行流程

```
每 15 分鐘執行：
    │
    ▼
┌─────────────────┐
│ 載入所有啟用    │
│ 自動駕駛的帳戶  │
└─────────────────┘
    │
    ▼
┌─────────────────┐
│ 同步最新數據    │
│ 從 Google/Meta  │
└─────────────────┘
    │
    ▼
┌─────────────────┐
│ 評估每個規則    │
│ 檢查觸發條件    │
└─────────────────┘
    │
    ├─── 需執行 ──▶ 執行動作 → 記錄 → 通知用戶
    │
    └─── 無觸發 ──▶ 等待下次檢查
```

---

## 8. AI 服務規格

### 8.1 報告生成

**Prompt 範例：**
```
你是一位親切的廣告顧問，要用簡單白話的方式向小老闆說明廣告成效。

不要使用專業術語（如 CPA、CTR、ROAS），改用：
- CPA → 「每筆訂單成本」
- CTR → 「點擊率」
- ROAS → 「投報率」或「每花 1 元賺 X 元」

語氣要像朋友聊天，可以用 emoji 讓報告更生動。

以下是這個月的數據：
{data}

請生成一份月報，包含：
1. 整體表現摘要（3-4 句話）
2. 表現最好的廣告
3. 表現最差的廣告（如有被關閉要說明）
4. 下個月的建議（1-2 點）
```

### 8.2 對話問答

**System Prompt：**
```
你是「廣告船長」的 AI 助手，專門幫助不懂廣告的中小企業老闆管理廣告。

你的特點：
1. 說話簡單直白，不用專業術語
2. 像朋友一樣親切，但專業可靠
3. 回答要簡短，不要長篇大論
4. 可以幫用戶執行操作（暫停廣告、調整預算等）
5. 用 emoji 讓對話更生動

用戶帳戶資訊：
{account_context}

最近的廣告數據：
{recent_data}
```

### 8.3 AI 成本控制

| 功能 | 模型 | 預估成本/次 | 限制 |
|-----|------|------------|------|
| 週報生成 | GPT-4o-mini | $0.01 | 無限制 |
| 月報生成 | GPT-4o | $0.05 | 無限制 |
| 對話問答 | GPT-4o-mini | $0.005 | 30 則/月（基礎） |
| 文案生成 | GPT-4o | $0.03 | 20 組/月（加值包） |
| 圖片生成 | DALL-E 3 | $0.04 | 10 張/月（素材包） |

---

## 9. 開發階段

### 9.1 MVP（Phase 1）- 8 週

| 週次 | 任務 | 交付物 |
|-----|------|-------|
| 1-2 | 專案重構、LINE Bot 基礎 | LINE 可收發訊息 |
| 3-4 | 自動駕駛引擎、規則系統 | 可自動暫停/調整 |
| 5-6 | 白話報告生成、每日摘要 | 報告可發送到 LINE |
| 7-8 | 簡化儀表板、整合測試 | MVP 上線 |

**MVP 功能範圍：**
- ✅ Google Ads / Meta Ads 連接
- ✅ 自動駕駛模式（暫停 + 預算調整）
- ✅ LINE 每日摘要通知
- ✅ LINE 異常警示
- ✅ 週報/月報生成
- ✅ 簡化版 Web 儀表板

### 9.2 Phase 2 - 6 週

- AI 對話顧問
- AI 文案生成
- 預算顧問
- 加值包功能

### 9.3 Phase 3 - 4 週

- AI 圖片生成
- 競品監控
- WhatsApp / Telegram 整合

---

## 10. 成功指標

### 10.1 產品指標

| 指標 | 目標 | 說明 |
|-----|------|------|
| 註冊轉換率 | > 10% | 訪客 → 註冊 |
| 付費轉換率 | > 5% | 註冊 → 付費 |
| 月留存率 | > 80% | 次月仍在使用 |
| NPS | > 40 | 淨推薦值 |

### 10.2 業務指標

| 指標 | 3 個月目標 | 12 個月目標 |
|-----|-----------|------------|
| 付費用戶數 | 50 | 500 |
| MRR | NT$150,000 | NT$2,000,000 |
| 平均客單價 | NT$3,000 | NT$4,000 |

---

## 附錄 A：術語對照表

| 專業術語 | 白話說法 |
|---------|---------|
| CPA (Cost Per Action) | 每筆訂單成本 |
| CTR (Click-Through Rate) | 點擊率 |
| ROAS (Return On Ad Spend) | 投報率、每花 1 元賺 X 元 |
| Impression | 曝光次數 |
| Conversion | 訂單/轉換 |
| Creative Fatigue | 素材疲勞（廣告看膩了） |
| A/B Testing | 測試哪個版本比較好 |

---

## 附錄 B：與 v1.0 的主要差異

| 項目 | v1.0 | v2.0 |
|-----|------|------|
| 目標客群 | 代操公司 | 中小企業老闆 |
| 產品形態 | 專業儀表板 | LINE Bot + 簡化後台 |
| 核心功能 | 健檢 + 一鍵執行 | 自動駕駛 + 白話報告 |
| 介面設計 | 專業詳細 | 極度簡化 |
| 商業模式 | 按帳戶數分級 | 保底月費 + 花費抽成 |
| AI 角色 | 輔助建議 | 自動執行 + 對話顧問 |

---

**文件結束**

*最後更新：2026-01-23*
*版本：2.0*
